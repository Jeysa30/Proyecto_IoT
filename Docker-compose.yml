version: '3.8'

services:

  iot-gateway:
    build:
      context: ./IoT_gateway
    container_name: iot-gateway
    ports:
      - "50051:50051"  # Prueba
    restart: always

  sensor-grpc:
    build:
      context: ./sensors/sensor_1
    container_name: sensor-grpc
    depends_on:
      - iot-gateway
    environment:
      - GATEWAY_HOST=iot-gateway
    restart: always